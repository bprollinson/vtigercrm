<!--*********************************************************************************
** The contents of this file are subject to the vtiger CRM Public License Version 1.0
 * ("License"); You may not use this file except in compliance with the License
 * The Original Code is:  vtiger CRM Open Source
 * The Initial Developer of the Original Code is vtiger.
 * Portions created by vtiger are Copyright (C) vtiger.
 * All Rights Reserved.
*
 ********************************************************************************/
-->
<!-- BEGIN: main -->
<table width="100%" cellpadding="2" cellspacing="0" border="0">
<tr>
    <td vAlign="middle" align="left"><IMG src="{IMAGE_PATH}Tickets.gif" border="0"></td>
    <td class="moduleTitle" vAlign="middle" align="left" noWrap width="100%" height="20">{MOD.LBL_TICKET}{MOD.LBL_COLON}  {NAME}</td>
	<td nowrap class='bodySmall' align='right'>[ <A href='http://www.vtiger.com/products/crm/document.html' target='_blank'>{APP.LNK_HELP}</A> ]</td>
</tr>
<tr><td colspan="4"><div class="hline"><img height='1' src='include/images/blank.gif'></div></td></tr></table>

<table width="100%" cellpadding="2" cellspacing="0" border="0"><tr> 
	<td align="left"></td>
	<td>
		<table cellpadding="0" cellspacing="5" border="0">
		<tr>
			<link rel="stylesheet" type="text/css" media="all" href="jscalendar/calendar-win2k-cold-1.css">
        	        <script type="text/javascript" src="jscalendar/calendar.js"></script>
			<script type="text/javascript" src="jscalendar/lang/calendar-{CALENDAR_LANG}.js"></script>
	                <script type="text/javascript" src="jscalendar/calendar-setup.js"></script>	
			<form name="EditView" method="POST" action="index.php">
			<input type="hidden" name="module" value="HelpDesk">
			<input type="hidden" name="action">
			<input type="hidden" name="mode" value="{MODE}">
			<input type="hidden" name="id" value="{ID}">
			<input type="hidden" name="return_module" value="{RETURN_MODULE}">
			<input type="hidden" name="return_id" value="{RETURN_ID}">
			<input type="hidden" name="return_action" value="{RETURN_ACTION}">						
		<td><input title="{APP.LBL_SAVE_BUTTON_TITLE}" accessKey="{APP.LBL_SAVE_BUTTON_KEY}" class="button" onclick="this.form.action.value='SaveTicket';return check4null(EditView)" type="submit" name="button" value="  {APP.LBL_SAVE_BUTTON_LABEL}  " ></td>
		<td><input title="{APP.LBL_CANCEL_BUTTON_TITLE}" accessKey="{APP.LBL_CANCEL_BUTTON_KEY}" class="button" onclick="this.form.action.value='{RETURN_ACTION}'; this.form.module.value='{RETURN_MODULE}'; this.form.record.value='{RETURN_ID}'" type="submit" name="button" value="  {APP.LBL_CANCEL_BUTTON_LABEL}  "></td>
		</tr></table>
	</td>
	<td></td>
	<td align="right" nowrap><font class="required">{APP.LBL_REQUIRED_SYMBOL}</font>{APP.NTC_REQUIRED}</td>
</tr>
</table> 

<table width="100%" border="0" cellspacing="0" cellpadding="0" class="formOuterBorder">
<tr>
<td>
	<table width="100%" border="0" cellspacing="1" cellpadding="2">
	<tr>
	<td width="20%" class="dataLabel">{MOD.LBL_GROUP}</td>
	<td width="30%">{ASSIGNED_USER_GROUP_OPTIONS}</select></td>
	<td width="20%" class="dataLabel">{APP.LBL_ASSIGNED_TO}</td>
	<td width="30%"><select tabindex='5' name="assigned_user_id">{ASSIGNED_USER_OPTIONS}</select></td>
	</tr><tr>
	<td width="20%" class="dataLabel"><select name='parent_type' tabindex="2" onChange="document.EditView.parent_name.value=''; document.EditView.parent_id.value=''">
		<OPTION selected value='Accounts' {ACCOUNTSELECTED}>{MOD.LBL_ACCOUNT}</OPTION>
		<OPTION value='Opportunities' {OPPORTUNITYSELECTED}>{MOD.LBL_OPPURTUNITY}</OPTION>
		<OPTION value='Products' {PRODUCTSELECTED}>{MOD.LBL_PRODUCT}</OPTION></select></td>
	<td width="30%"><input name='parent_id' type="hidden" value='{PARENT_ID}'><input name='parent_name' readonly type='text' value="{ENTITYNAME}"> <input title='Change [Alt+G]' accessKey='G' tabindex='2' type='button' class='button' value='Change' name='button' LANGUAGE=javascript onclick='return window.open("index.php?module="+ document.EditView.parent_type.value + "&action=Popup&html=Popup_picker&form=HelpDeskEditView","test","width=500,height=400,resizable=1,scrollbars=1,top=150,left=200");'></td>
	<td width="20%" valign="top" class="dataLabel">{MOD.LBL_CONTACT_NAME}</td>
        <td width="30%"><input name='contact_name' readonly type='text' value='{CONTACT_NAME}'><input name='contact_id' type="hidden" value='{CONTACT_ID}'>&nbsp;<input title="{APP.LBL_CHANGE_BUTTON_TITLE}" accessKey="{APP.LBL_CHANGE_BUTTON_KEY}" tabindex="2" type="button" class="button" value='{APP.LBL_CHANGE_BUTTON_LABEL}' name='button' LANGUAGE=javascript onclick='return window.open("index.php?module=Contacts&action=Popup&html=Popup_picker&form=EditView{DEFAULT_SEARCH}","test","width=600,height=400,resizable=1,scrollbars=1");'></td>
	</tr><tr>
	<td width="20%" valign="top" class="dataLabel">{MOD.LBL_PRIORITY}</td>
	<td width="30%">{PRIORITYOPTIONS}</td>
	<td width="20%" valign="top" class="dataLabel">{MOD.LBL_STATUS}</td>
	<td width="30%">{STATUSOPTIONS}</td>
	</tr><tr>
	<td width="20%" class="dataLabel">{MOD.LBL_CATEGORY}</td>
	<td width="30%">{CATEGORYOPTIONS}</td>
        <td width="20%" class="dataLabel">{MOD.LBL_SEND_MAIL} ?</td>
        <td width="30%"><input name='send_mail' type="checkbox" tabindex='1' {SEND_MAIL}></td>

	</tr><tr>
	<td width="20%" valign="top" class="dataLabel">{MOD.LBL_ESTIMATED_FINISHING_TIME}</td>
	<td width="30%"><input name='estimated_finishing_date' id='jscal_field' tabindex='1' size='11' maxlength='10' type="text" value="{ESTIMATED_FINISHING_DATE}"> <img src="themes/{THEME}/images/calendar.gif" id="jscal_trigger"> &nbsp; <input name='estimated_finishing_time' tabindex='1' size='5' maxlength='5' type="text" value='{ESTIMATED_FINISHING_TIME}'><br><font size="1"><em old="{APP.NTC_DATE_TIME_FORMAT}">(yyyy-mm-dd 24:00)</em></font> </td>
	</tr><tr>
	<td width="20%" valign="top" class="dataLabel"><FONT class="required">{APP.LBL_REQUIRED_SYMBOL}</FONT>{MOD.LBL_SUBJECT}</td>
	<td colspan="4"><textarea name='subject' cols="70" tabindex='1' rows="1">{SUBJECT}</textarea></td>
	</tr><tr>
	<td width="20%" valign="top" class="dataLabel">{MOD.LBL_DESCRIPTION}</td>
	<td colspan="4"><textarea name='description' tabindex='2' cols="80" rows="8">{DESCRIPTION}</textarea></td>
</tr></table>
</td></tr></table>
<BR>
<BR>
{CUSTOMFIELD}
      </form>
<script>

function trim(s)
{
	while (s.substring(0,1) == " ")
	{
		s = s.substring(1, s.length);
	}
      	while (s.substring(s.length-1, s.length) == ' ')
	{
	        s = s.substring(0,s.length-1);
	}
        return s;
}


function check4null(form)
{
        var isError = false;
        var errorMessage = "";
        if (trim(form.subject.value) =='')
	{
                isError = true;
                errorMessage += "\n subject";
                form.subject.focus();
        }

        if (isError == true) 
	{
                alert("Missing required fields: " + errorMessage);
                return false;
        }
	return true;

}

</script>

<script type="text/javascript">
        Calendar.setup ({
                inputField : "jscal_field", ifFormat : "{CALENDAR_DATEFORMAT}", showsTime : false, button : "jscal_trigger", singleClick : true, step : 1
        });
</script>

{JAVASCRIPT}
<!-- END: main -->
